---
title: "Controle EstatÃ­stico de Qualidade"
author: "Adriano, Beatriz, Caio, Fernanda, Thalles"
institute: "Universidade Federal de Ouro Preto - 2023"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: ["tamu", "rladies-fonts"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false


---
class: center, middle

# CapÃ­tulo 6

### GrÃ¡ficos de Controle para Processos Autocorrelacionados

---
class: inverse, center, middle

# Vamos lÃ¡!

---

# GrÃ¡ficos de Controle para Processos Autocorrelacionados

##6.1 INTRODUÃ‡ÃƒO


--

- Para um grÃ¡fico de controle convencional e necessÃ¡rio que as observaÃ§Ãµes sejam independentes e normalmente distribuÃ­das porem se a hipÃ³tese de normalidade for violada ainda sim os grÃ¡ficos de controle funcionam bem pois como exemplo as estatÃ­sticas R e S seguem distribuiÃ§Ã£o diferente da normal , jÃ¡ a violaÃ§Ã£o da hipÃ³tese independÃªncia reduz a aplicabilidade dos grÃ¡ficos convencionais;


--

- Quando esses valores possuem alguma interdependÃªncia ou autocorrelaÃ§Ã£o a probabilidade da observaÃ§Ã£o cair fora dos limites de controle aumenta e compromete a credibilidade dos dados.


---
# GrÃ¡ficos de Controle para Processos Autocorrelacionados

##6.2 COEFICIENTE DE CORRELAÃ‡ÃƒO E FUNÃ‡ÃƒO DE AUTOCORRELAÃ‡ÃƒO

- O coeficiente de correlaÃ§Ã£o Ïxy entre duas variÃ¡veis aleatÃ³rias X e Y e definido como:

--

- $ğœŒ_{AB} = \dfrac{ğ¸[(ğ‘‹âˆ’Âµ_ğ‘‹ )(ğ‘Œâˆ’Âµ_ğ‘Œ )]}{(ğœ_ğ‘‹ ğœ_ğ‘Œ)}$

--

- Que estÃ¡ sempre no intervalo [-1,1] em modulo quanto mais prÃ³ximo de 1 maior o grau de dependÃªncia entre elas;

--

- O coeficiente de correlaÃ§Ã£o entre X e Y pode ser estimado pelo coeficiente de correlaÃ§Ã£o amostral ğ‘Ÿ_ğ‘‹ğ‘Œ obtidos entre uma amostra de n pares (xi, yi);


---
# GrÃ¡ficos de Controle para Processos Autocorrelacionados

- Podemos observar isto por meio do grÃ¡fico de dispersÃ£o onde quanto mais â€œarredondadaâ€ menor o coeficiente de correlaÃ§Ã£o e quanto mais â€œafiladaâ€, ou seja, parecida com uma reta maior o coeficiente de correlaÃ§Ã£o como exemplo temos um grÃ¡fico de dispersÃ£o com aparÃªncia afilada e  $ğ‘Ÿ_{ğ‘‹ğ‘Œ}=0,9$

--
#![grÃ¡fico 6.2](imagem 6.png)

---

# GrÃ¡ficos de Controle para Processos Autocorrelacionados

- Como estamos interessadas na correlaÃ§Ã£o entre observaÃ§Ãµes sucessivas de uma mesma caracterÃ­stica de qualidade X e como queremos a correlaÃ§Ã£o entre Xi Xi-k com k indicando a defasagem entre as observaÃ§Ãµes neste caso a expressÃ£o do coeficiente de autocorrelaÃ§Ã£o amostral serÃ¡

--

- $r_{k} = \dfrac{\sum_{i=k+1}^n(xi-\bar{X})(x_{i-k}-\bar{X})}{\sum_{i=1}^n(xi-\bar{X})Â²}$

--

- O conjunto calculado pela expressÃ£o e chamado de funÃ§Ã£o de autocorrelaÃ§Ã£o amostral da serie de dados Xi.

---
# GrÃ¡ficos de Controle para Processos Autocorrelacionados

##6.3 EXEMPLO DE UM PROCESSO AUTOCORRELACIONADO 

- TrÃ¡s um exemplo pronto onde o coeficiente de correlaÃ§Ã£o e alto e indica que viria a trazer problemas para os grÃ¡ficos convencionais ele mostra o grÃ¡fico de medias que indica **12 dos 20 pontos** fora dos limite;

--
#![grÃ¡fico 6.2](imagem 7.png)

---
# GrÃ¡ficos de Controle para Processos Autocorrelacionados

##6.4 GRAFICO DE OBSERVAÃ‡Ã•ES INDIVIDUAIS E AMPLITUDE MOVEL

- Como vimos os limites de controle quando as observaÃ§Ãµes nÃ£o sÃ£o independentes tendem a ter muitas observaÃ§Ãµes fora dos limites . uma alternativa para o controle do processos auto correlacionados consiste em **espaÃ§ar as medias por um intervalo de tempo suficientemente longo**, os grÃ¡ficos de mÃ©dia e amplitude sÃ£o substituÃ­dos pelos *grÃ¡ficos de observaÃ§Ãµes individuais* e *amplitude mÃ³vel* , ou *â€œgrÃ¡fico de X e MRâ€*;

--

- A amplitude mÃ³vel e dada por $(MR_i)$

--

- $MR_i=mÃ¡x(x_i,x_{i-1})-mÃ­n(x_i,x_{i-1})$

---
# GrÃ¡ficos de Controle para Processos Autocorrelacionados

--
- A partir de um conjunto de m amostras, podemos estimar a mÃ©dia e desvio-padrÃ£o do processo:

--

- $\bar{Âµ}_0 =\bar{ğ‘‹}=\sum_{i=1}^mx_i$

--

- $\bar{ğœ}_0 =Sd=\dfrac{\bar{MR}}{d2}$

--

- $\bar{MR}=\dfrac{\sum_{i=2}^m MR_i}{m-1}$

--

- Limites de controle- MÃ©dia:

#![LimM](Limites controle m.png)


---
# GrÃ¡ficos de Controle para Processos Autocorrelacionados

- Limites de controle- Amplitude:

--
#![LimsM](imagem 8.png)

--
- Para determinar o intervalo de tempo entre as amostras para que nÃ£o haja autocorrelaÃ§Ã£o, basta calcular o **rk** para diversos espaÃ§amentos de tempo e verificar o menor valor de k que satisfaÃ§a $ğ‘Ÿğ‘˜<2/\sqrt{ğ‘}$, onde **N** Ã© o nÃºmero de observaÃ§Ãµes individuais usadas para o cÃ¡lculo dos coeficientes de correlaÃ§Ã£o amostrais rk.

--

- Recomenda-se usar no mÃ­nimo 80 observaÃ§Ãµes (N â‰¥ 80).


---
# GrÃ¡ficos de Controle para Processos Autocorrelacionados

##6.5 GRAFICOS DE CONTROLE COM LIMITES ALARGADOS 

- Processos discretos, em especial os total ou parcialmente automatizados, tambÃ©m podem exibir **autocorrelaÃ§Ã£o**. Ã‰ possÃ­vel monitorar esses processos com grÃ¡ficos de X e MR, porÃ©m nÃ£o Ã© interessante por serem baseados em observaÃ§Ãµes individuais espaÃ§adas no tempo. Uma forma de monitorar a variabilidade de curto prazo Ã© retirar as amostras com *n > 1*, o que nos leva a grÃ¡ficos de ğ‘‹e R.

--

- Para evitar que ocorra muitos alarmes falsos, deve-se alargar adequadamente os limites de controle do grÃ¡fico de $\bar{X}$, com base na variabilidade total de $\bar{X}$.Sabendo disso, temos:

---
# GrÃ¡ficos de Controle para Processos Autocorrelacionados

--
#![LimsaM](imagem 9.png)

--
- Com **m** sendo o nÃºmero de amostras iniciais e **c4** sendo determinado pelo nÃºmero m. 

--
- Limites de controle - MÃ©dia:

--
#![LimsaM](imagem 10.png)

--
- Limites de controle - Amplitude: Ã© mantido na forma usual pois â€œflutuaÃ§Ãµesâ€ da mÃ©dia do processo nÃ£o afetam a dispersÃ£o intra-amostral.

---

class: inverse, middle, center

#Exemplo 1

---

- Suponha que se realize uma medida da temperatura do banho quÃ­mico a cada 60 minutos; a primeira medida realizada Ã s 8h30. Os valores obtidos seriam as temperaturas $X_{11}$, $X_{31}$ , $X_{51}$, $X_{71}$, e assim por diante, da Tabela 6.1 (que contÃ©m valores da temperatura do banho quÃ­mico medidos a cada 3 minutos). Decorridas 20 horas, obter-se-iam as 20 medidas registradas na coluna X da Tabela 6.5.

--
- Essa tabela fornece ainda os valores de MR de cada amostra, e as mÃ©dias X e MR.

--
```{r echo=FALSE, out.width = "40%", fig.align = "center"}
knitr::include_graphics("imagem 11.png")
```

---

- Aplicando as fÃ³rmulas: $LIC_{MR} = 0$;  $LM_{MR} = 7,102$;  $LSC_{MR} = 23,202$;

--
- $LIC_{X} = 206,128$;  $LM_X = 225,016$; e $LSC_X = 243,904$.

--
- Os grÃ¡ficos estÃ£o na Figura 6.4. Todos os pontos estÃ£o dentro dos limites, nÃ£o hÃ¡, portanto, indicaÃ§Ã£o de descontrole do processo. (Isso reforÃ§a a evidÃªncia de que os pontos fora dos limites do grÃ¡fico de X da seÃ§Ã£o anterior sÃ£o alarmes falsos.)

--
```{r echo=FALSE, out.width = "54%", fig.align = "center"}
knitr::include_graphics("imagem12.png")
```

---

- Nesse exemplo, nÃ£o apenas reduzimos o tamanho das amostras para n = 1, mas tambÃ©m adotamos um intervalo de tempo entre observaÃ§Ãµes suficientemente longo para o efeito da **autocorrelaÃ§Ã£o dissipar-se**. 

- No nosso caso, *N = 150*; portanto $\dfrac{2}{âˆšğ‘} = 0,163$ . 

- Como a sÃ©rie inicial contÃ©m observaÃ§Ãµes espaÃ§adas de 3 minutos,   k = 10 corresponde a 30 minutos, k = 20 a uma hora, k = 40 a duas horas, e assim por diante.  

- A Tabela 6.3 mostra que r19= 0,155 Ã© o primeiro valor de r, menor que 0,163; portanto, o espaÃ§amento mÃ­nimo entre observaÃ§Ãµes deve ser de 19 Ã— 3 = 57 minutos. 

- EspaÃ§amentos maiores garantem a independÃªncia das observaÃ§Ãµes com maior margem de seguranÃ§a, como foi o caso do intervalo de uma hora (k = 20) empregado. **O prÃ³ximo exemplo ilustra o caso em que o intervalo de tempo adotado nÃ£o Ã© suficientemente longo para dissipar o efeito da autocorrelaÃ§Ã£o.**


---

class: inverse, middle, center

#Exemplo 2

---

```{r echo=FALSE, out.width = "60%", fig.align = "center"}
knitr::include_graphics("imagem 13.png")
```

---

```{r echo=FALSE, out.width = "60%", fig.align = "center"}
knitr::include_graphics("imagem 14.png")
```

---



class: inverse, middle, center

#Exemplo 3

---

- Vamos considerar a tabelo e o grÃ¡fico a seguir, relativos aos volumes de refrigerante em garrafas plÃ¡sticas, cujo valor-alvo Ã© 1000ml;

--
```{r echo=FALSE, out.width = "50%", fig.align = "center"}
knitr::include_graphics("imagem 15.png")
```
---
```{r echo=FALSE, out.width = "70%", fig.align = "center"}
knitr::include_graphics("imagem 16.png")
```

--
- A tabela 6.7 apresenta os cÃ¡lculos intermediÃ¡rios necessÃ¡rios para a obtenÃ§Ã£o do coeficiente de autocorrelaÃ§Ã£o amostral para k=1; r=693,509/1061,164=0,654. Esse valor representa forte autocorrelaÃ§Ã£o positiva. Os coeficientes de autocorrelaÃ§Ã£o $r_1$ a $r_4$ encontram-se na tabela 6.8.

---

```{r echo=FALSE, out.width = "50%", fig.align = "center"}
knitr::include_graphics("imagem 17.png")
```
    
---

```{r echo=FALSE, out.width = "70%", fig.align = "center"}
knitr::include_graphics("imagem 18.png")
```

---

```{r echo=FALSE, out.width = "60%", fig.align = "center"}
knitr::include_graphics("imagem 19.png")
```

---
```{r echo=FALSE, out.width = "50%", fig.align = "center"}
knitr::include_graphics("imagem 20.png")
```

- Note que, se o estimador para o desvio-padrÃ£o do processo usado no calculo dos limites para o grÃ¡fico de $\bar{X}$ tivesse sido o estimador usual $\dfrac{\bar{X}}{d_2}$, o resultado seria $LIC_\bar{X} =995,769$ e $LSC_\bar{X} =1003,600$; vÃ¡rios pontos do grÃ¡fico de $\bar{X}$, entÃ£o, estariam fora dos limites (nas amostras 10,15,17,19). Esses pontos seriam alarmes falsos.
    
---
class: inverse, middle, center

#Vamos ver nÃ¡ prÃ¡tica
#ResoluÃ§Ã£o ExercÃ­cio 6.1

---